¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü
ËÜ¥½¥Õ¥È¤Î¥ê¥ê¡¼¥¹¤ËºÝ¤·¤Æ¤Ï¤Ç¤­¤ë¤À¤±¤ÎÆ°ºî³ÎÇ§¤ò¤·¤Æ¤¤¤Þ¤¹¤¬¡¢ËÜ¥½
¥Õ¥È¤¬ÆâÊñ¤¹¤ëÀøºßÅªÌäÂê¤Ê¤É¤Î¸¶°ø¤Ë¤è¤ê¡¢OS¤¬µ¯Æ°¤·¤Ê¤¯¤Ê¤Ã¤¿¤ê¡¢OS
Æ°ºîÃæ¤ËÆÍÁ³¥Ñ¥Ë¥Ã¥¯¤¹¤ë¤Ê¤É¤Î²ÄÇ½À­¤¬¤¢¤ê¤Þ¤¹¡£¤³¤Î¤è¤¦¤Ê»öÂÖ¤ÎÈ¯À¸
¤ËÂÐ¤·¤Æ¡¢ÅöÊý¤Ï°ìÀÚ¤ÎÀÕÇ¤¤òÉé¤¤¤Þ¤»¤ó¤Î¤Ç¤´Íý²ò¤¯¤À¤µ¤¤¡£È¯À¸¤·¤¿Â»
³²¡Ê¥Õ¥¡¥¤¥ë¥·¥¹¥Æ¥à¤ÎÇË²õ¤Ë¤è¤ë¥Ç¡¼¥¿¾Ã¼º¤Ê¤É¡Ë¤ä¥·¥¹¥Æ¥àÉüµì¤Ë´Ø¤·
¤Æ¤ÎÀÕÇ¤¤Ê¤É¤âÉé¤¤¤Þ¤»¤ó¡£

   ËÜ¥½¥Õ¥È¤ò»ÈÍÑ¤¹¤ë¤«ÈÝ¤«¤Ï¡¢¤´¼«Ê¬¤ÎÀÕÇ¤¤ÇÈ½ÃÇ¤·¤Æ¤¯¤À¤µ¤¤¡£
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
¥È¥é¥Ö¥ë¤Ø¤ÎÂÐ½èÊýË¡¤ÏÊ¸Ãæ¤Ë´ÊÃ±¤Ë¤Þ¤È¤á¤Æ¤¢¤ê¤Þ¤¹¡£
                                                        Â¼»³ÀµÇ·
¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü·Ù¹ð¡ü¡ü¡ü¡ü¡ü¡ü¡ü


1. ³µÍ×

ËÜ¥½¥Õ¥È¤Ï¡¢JMicron JMC250/260 ¥Õ¥¡¥ß¥ê¡¼¤òSolaris¤Ç»ÈÍÑ¤¹¤ë
¤¿¤á¤Î¥É¥é¥¤¥Ð¤Ç¤¹¡£¥é¥¤¥»¥ó¥¹¾ò·ï¤ÏBSD¥é¥¤¥»¥ó¥¹¤Ç¤¹¡£


£²¡¥³°Éô»ÅÍÍ¤ÈÆ°ºî¾ò·ï

¥Ç¥Ð¥¤¥¹¥É¥é¥¤¥Ð¤Î¥Ð¥¤¥Ê¥ê¤Î¥Ñ¥¹:
	/kernel/drv/jmge
	/kernel/drv/sparcv9/jmge (sparc 64bit kernel¤Î¾ì¹ç)

¥Ç¥Ð¥¤¥¹Ì¾: /dev/jmgeN (N¤Ï¥æ¥Ë¥Ã¥ÈÈÖ¹æ)

Îã¤¨¤Ð¡¢ifconfig ¥³¥Þ¥ó¥É¤Ç¤Î¥Ç¥Ð¥¤¥¹¤ò»ØÄê¤¹¤ë¾ì¹ç¤Ë¤Ï¡¢¥¤¥ó¥¹¥¿¥ó¥¹
ÈÖ¹æ¤ò¤Ä¤±¤Æ¡¢
  ifconfig jmge0
¤Î¤è¤¦¤Ë¤Ê¤ê¤Þ¤¹¡£

ËÜ¥½¥Õ¥È¤ÎÆ°ºî³ÎÇ§¤ò¤·¤¿¥Ï¡¼¥É¥¦¥§¥¢À½ÉÊ¤Ï°Ê²¼¤ÎÄÌ¤ê¤Ç¤¹¡£
 JMC250 - JMicronÉ¾²Á¥Ü¡¼¥É
 JMC261 - JMicronÉ¾²Á¥Ü¡¼¥É


£³¡¥Æ°ºî´Ä¶­¤ÎÀßÄê

(1) ¥É¥é¥¤¥Ð¤Î¥Õ¥¡¥¤¥ë¤ò¥³¥Ô¡¼¤·¤Æ¤¯¤À¤µ¤¤¡£
        # gunzip -cd jmge-x.x.x.tar.gz | tar xf -

(2) ¥Í¥Ã¥È¥ï¡¼¥¯¥«¡¼¥ÉÍÑ¤Î¥Û¥¹¥ÈÌ¾¤ò /etc/hosts ¥Õ¥¡¥¤¥ë¤ËÅÐÏ¿¤·¤Æ¤¯¤À
   ¤µ¤¤¡£

(3) obj¤ÈMakefile¥Õ¥¡¥¤¥ë¤ò¥·¥¹¥Æ¥à¹½À®¤Ë¤·¤¿¤¬¤Ã¤Æ¥ê¥ó¥¯¤·Ä¾¤·¤Æ¤¯¤À¤µ¤¤¡£
default¤Ïi386¤Ègcc¤Ç¤¹¡£

        % cd /.../jmge-x.x.x
        % rm obj Makefile
        % ln -s Makefile.$(KARCH)_$(COMPILER) Makefile
        % ln -s $KARCH obj

  ¤³¤³¤Ç $(KARCH) ¤Ï `isainfo -n` ¤Î·ë²Ì¤Ç¤¹¡£$(COMPILER) ¤Ï gcc ¤Þ¤¿¤Ï
suncc ¤Ç¤¹¡£


(4) ¥Ð¥¤¥Ê¥ê¤ÎºîÀ®Ê
ËÜ¥É¥é¥¤¥Ð¤ÏOpenSolaris¤ÎGLD v3¥¤¥ó¥¿¥Õ¥§¡¼¥¹¤Ç¤âÍøÍÑ¤Ç¤­¤Þ¤¹¡£°Ê²¼¤Î
¼ê½ç¤ÇºÆ¥³¥ó¥Ñ¥¤¥ë¤·¤Æ¤¯¤À¤µ¤¤¡£

        % rm Makefile.config
        % ln -s Makefile.config_gld3 Makefile.config
        % /usr/ccs/bin/make

£´. ¥Æ¥¹¥È
   ¥¤¥ó¥¹¥È¡¼¥ë¤ÎÁ°¤Ë¤Ï¥Æ¥¹¥È¤Î¼Â»Ü¤ò¤ª´ê¤¤¤·¤Þ¤¹¡£

        # cd /.../jmge-x.x.x
        # /usr/ccs/bin/make install
        # ./adddrv.sh
        # /usr/ccs/bin/make uninstall (solaris7¤Ç¤Ï¼Â»Ü¤·¤Ê¤¤¤Ç¤¯¤À¤µ¤¤)
        # modload obj/jmge
        # devfsadm -i jmge
        # ifconfig jmgeN plumb (N¤Ï¥æ¥Ë¥Ã¥ÈÈÖ¹æ¡¢ºÇ½é¤Î¥«¡¼¥É¤ËÂÐ¤·¤Æ¤ÏÄÌ¾ï0)
        # ifconfig -a        (É½¼¨¤µ¤ì¤¿ethernet¥¢¥É¥ì¥¹¤¬Àµ¤·¤¤¤³¤È¤ò
                              ³ÎÇ§¤·¤Æ¤¯¤À¤µ¤¤¡Ë
        # ifconfig jmgeN ¥Û¥¹¥ÈÌ¾
        # ifconfig jmgeN      ( É½¼¨¤µ¤ì¤¿IP¥¢¥É¥ì¥¹¤¬Àµ¤·¤¤¤³¤È¤ò³ÎÇ§
¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¤·¤Æ¤¯¤À¤µ¤¤¡Ë
        # ifconfig jmgeN up   (¤³¤ì¤Çtelnet ping¤Ê¤É¤¬Æ°¤¯¤è¤¦¤Ë¤Ê¤ê¤Þ¤¹¡Ë


£µ¡¥¥¤¥ó¥¹¥È¡¼¥ë
¥Æ¥¹¥È¤ÇÆ°ºî¤ò³ÎÇ§¤Ë¤·¤¿¾ì¹ç¤Ë¸Â¤ê¡¢¥¤¥ó¥¹¥È¡¼¥ë¤·¤Æ¤¯¤À¤µ¤¤¡£

(1) ¥É¥é¥¤¥Ð¤ò /kernel/drv ¥Ç¥£¥ì¥¯¥È¥ê¤Ë¥³¥Ô¡¼¤·¤Þ¤¹¡£
	# cd /.../jmge-x.x.x
	# /usr/ccs/bin/make install

    ¥Æ¥¹¥È¤ò¼Â»Ü¤·¤Æ¤¤¤Ê¤¤¾ì¹ç¤Ï¤³¤³¤Ç°Ê²¼¤ò¼Â¹Ô¤·¤Æ²¼¤µ¤¤¡£
            # ./adddrv.sh
            # devfsadm -i jmge

(2) ³Æ¥¤¥ó¥¿¥Õ¥§¡¼¥¹¥«¡¼¥É¤ËÂÐ¤·¤Æ¥Í¥Ã¥È¥ï¡¼¥¯ÀßÄê¤ò¤·¤Þ¤¹¡£°Ê²¼¤Î¥Õ¥¡
    ¥¤¥ë¤ËSolaris¤È¤·¤Æ¤ÎÄÌ¾ï¤Î¥Í¥Ã¥È¥ï¡¼¥¯ÀßÄê¤ò¤·¤Æ¤¯¤À¤µ¤¤¡£
	/etc/hostname.jmgeN
			(N¤Ï¿ô»ú¡¢¤¿¤È¤¨¤Ð¡¢ /etc/hostname.jmge0)

    DHCP¤ò»ÈÍÑ¤·¤Æ¥Ö¡¼¥È»þ¤Ë¼«Æ°Åª¤ËIP¥¢¥É¥ì¥¹¤òDHCP¤«¤éÆÀ¤ë¾ì¹ç¤Ë¤Ï¡¢
    °Ê²¼¤Î¥Õ¥¡¥¤¥ë(Ãæ¿È¤Ï¶õ¤Ç¤è¤¤)¤òºîÀ®¤·¤Æ¤¯¤À¤µ¤¤¡£
        /etc/dhcp.jmgeN

(3)OS¤ò¥ê¥Ö¡¼¥È¤·¤Þ¤¹¡£
	# init 6


£¶¡¥¥È¥é¥Ö¥ë¥·¥å¡¼¥Æ¥£¥ó¥°
¡û¥É¥é¥¤¥Ð¥í¡¼¥É»þ¡Ê¤â¤·¤¯¤ÏOS¥Ö¡¼¥È»þ¡Ë¤ËOS¤¬panic¤·¡¢¥·¥¹¥Æ¥à¤¬Î©¤Á¾å
  ¤¬¤é¤Ê¤¯¤Ê¤Ã¤¿¾ì¹ç¡£

  BIOSÀßÄê¤Ë¤Æon board¥Í¥Ã¥È¥ï¡¼¥¯¥³¥ó¥È¥í¡¼¥é¤òdisable¤Ë¤·¤ÆOS¤ò¥Ö¡¼¥È
  ¸å¡¢OS¤Ø¤Î¥É¥é¥¤¥Ð¤ÎÅÐÏ¿¤òËõ¾Ã¤·¤Æ¤¯¤À¤µ¤¤¡£OS¤Î¥É¥é¥¤¥ÐÅÐÏ¿¤ÎËõ¾Ã¤Ï
  °Ê²¼¤Î¼ê½ç¤Ç¹Ô¤¨¤Þ¤¹¡£
     rem_drv jmge

  ¤â¤·¤¯¤Ï¡¢solaris¤ò -a ¥ª¥×¥·¥ç¥ó¤ò¤Ä¤±¤Æ¥Ö¡¼¥È¤·¡¢system¥Õ¥¡¥¤¥ë¤ò¥Ç
  ¥Õ¥©¥ë¥È[etc/system]¤«¤é /etc/system.nojmge¤Ëº¹¤·ÂØ¤¨¤Æ¤¯¤À¤µ¤¤¡£¤³¤ì¤Ç
¡¡jmge¥É¥é¥¤¥Ð¤¬¥«¡¼¥Í¥ë¤Ë¥í¡¼¥É¤µ¤ì¤Ê¤¯¤Ê¤ê¤Þ¤¹¡£/etc/system.nojmge¤Ï¡¢ 
  make install ¤â¤·¤¯¤Ï make test ¤Ë¤Æ¼«Æ°Åª¤ËºîÀ®¤µ¤ì¤Þ¤¹¡£

¡û¥ê¥Ö¡¼¥È¤·¤ÆOS¤ÏÎ©¤Á¾å¤¬¤ë¤¬¡¢¥Í¥Ã¥È¥ï¡¼¥¯¥¤¥ó¥¿¥Õ¥§¡¼¥¹¤¬Æ°ºî¤·¤Ê¤¤
  ¾ì¹ç

¡¦¥Ç¥Ð¥¤¥¹¤ÏÇ§¼±¤µ¤ì¤Æ¤¤¤ë¤«¡©
  ifconfig -a¤ò¼Â¹Ô¤·¤Æ¤¯¤À¤µ¤¤¡£ jmgeN¤¬É½¼¨¤µ¤ì¤Þ¤¹¤«¡©
  É½¼¨¤µ¤ì¤Æ¤¤¤ë¾ì¹ç¤Ï¡¢¥É¥é¥¤¥Ð¤ÏÀµ¤·¤¯Ç§¼±¤µ¤ì¤Æ¤¤¤Þ¤¹¤Î¤Ç¡¢IP¥¢¥É¥ì
  ¥¹¤Ê¤É¤Î¥Í¥Ã¥È¥ï¡¼¥¯ÀßÄê¤ËÌäÂê¤¬¤¢¤ë²ÄÇ½À­¤¬¤¢¤ê¤Þ¤¹¡£

¡¦¥±¡¼¥Ö¥ë¤ÎÀÜÂ³¤ËÌäÂê¤Ê¤¤¤«¡©
  ifconfig ¤Ç jmgeN¤¬¸«¤¨¤ë¤Î¤ËÄÌ¿®¤Ç¤­¤Ê¤¤¾ì¹ç¤Ï¡¢¥±¡¼¥Ö¥ë¤ÎÀÜÂ³¤Ê
  ¤É¤ËÌäÂê¤¬¤¢¤ë²ÄÇ½À­¤â¤¢¤ê¤Þ¤¹¡£
  ¤³¤Î¾ì¹ç¤Ï¡¢snoop -P -d jmgeN ¤Ç snoop¥³¥Þ¥ó¥É¤òµ¯Æ°¤·¡¢¥Í¥Ã¥È¥ï
  ¡¼¥¯¤Ë¤Ä¤Ê¤¬¤ì¤¿Â¾¤Î¥Û¥¹¥È¤«¤é¥Ñ¥±¥Ã¥È¤òÅö³º¥Û¥¹¥È°¸¤ËÎ®¤·¤Æ¤¯¤À¤µ¤¤¡£
  (ping ¤Ç²Ä¡Ë¡£snoop¤¬¥í¥°¤òÀµ¾ï¤Ë½ÐÎÏ¤¹¤ì¤Ð¡¢¥±¡¼¥Ö¥ë¤Ï¤Ä¤Ê¤¬¤Ã¤Æ¤¤¤Þ
  ¤¹¡£¾¯¤Ê¤¯¤È¤â¼õ¿®Â¦¤Ïok¤Ç¤¹¡£

  Á÷¿®¤¬¤Ç¤­¤Æ¤¤¤ë¤«¤É¤¦¤«¤Ï¡¢¤Û¤«¤Î¥Û¥¹¥È¤ÇÆ±ÍÍ¤Î¤³¤È¤ò¤·¤Æ¡¢jmge¤«¤é
  Á÷¿®¤·¤¿¥Ñ¥±¥Ã¥È¤¬¼õ¿®¤Ç¤­¤Æ¤¤¤ë¤«¤É¤¦¤«³ÎÇ§¤·¤Æ¤¯¤À¤µ¤¤¡£
  ¤³¤³¤Þ¤Ç¤ÎÆ°ºî¤¬³ÎÇ§¤Ç¤­¤Æ¤â¡¢¤Þ¤ÀIPÅª¤Ë¤Ä¤Ê¤¬¤é¤Ê¤¤¤È¤¤¤¦¤Î¤Ï¡¢½½Ãæ
  È¬¶å¡¢IP´ØÏ¢¤Î¥Í¥Ã¥È¥ï¡¼¥¯ÀßÄê¤ÎÌäÂê¤Ç¤¹¡£

¡û¥Í¥Ã¥È¥ï¡¼¥¯¥¤¥ó¥¿¥Õ¥§¡¼¥¹¤ÎÁ÷¼õ¿®¤Î¾õÂÖ¡ÊÅý·×¾ðÊó¡Ë¤Ï
  netstat -k jmgeN
 ¤ÇÆÀ¤é¤ì¤Þ¤¹¡£-k¤Ïman ¤Ë¤Ïµ­ºÜ¤µ¤ì¤Æ¤¤¤Ê¤¤±£¤·¥ª¥×¥·¥ç¥ó¤Ç¤¹¤¬¡¢»¨»ï¡¡
 SunWorld¤Îµ­»ö¤ÇÃÎ¤ê¤Þ¤·¤¿¡£¤³¤Î¥³¥Þ¥ó¥É¤ÏÊØÍø¤Ê¤Î¤Ç¤ª´«¤á¤Ç¤¹¡£


¥Æ¥¹¥ÈÃæ¤Ê¤É¤ËSolaris¤¬¥Ñ¥Ë¥Ã¥¯¤·¤¿¾ì¹ç¤Ë¤Ï¡¢°Ê²¼¤Î¾ðÊó¤ò¤ªÁ÷¤ê¤¯¤À¤µ¤¤¡£
¤Ç¤­¤ëÈÏ°Ï¤ÇÄ´ºº¤·¤Þ¤¹¡£

  (1) /var/adm/messages

  (2) prtconf -pv ¤Î½ÐÎÏ·ë²Ì

  (3) prtconf -vD ¤Î½ÐÎÏ·ë²Ì

  (4) OS¥À¥ó¥×¤Ø¤Îadb ¤Î½ÐÎÏ·ë²Ì
  Solaris¤Î¥³¥¢¥À¥ó¥×¤Ï unix.N ¤È vmcore.N  ¤Î£²¤Ä¤Î¥Õ¥¡¥¤¥ë¤«¤é¹½À®¤µ
  ¤ì¤Æ¤ª¤ê /var/crash/¥Û¥¹¥ÈÌ¾¤Î¥Ç¥£¥ì¥¯¥È¥ê¤Ë¤¢¤ê¤Þ¤¹¡£

   'mdb -k unix.N vmcore.N'¤ò¼Â¹Ô¤·¤Æ°Ê²¼¤Î¥µ¥Ö¥³¥Þ¥ó¥É¤Î¾ðÊó
   $c   (stack trace back ¤¬É½¼¨¤µ¤ì¤Þ¤¹)
   $<msgbuf   (OS¤Î¥á¥Ã¥»¡¼¥¸¥Õ¥¡¥¤¥ë¤ÎºÇ¸å¤ÎÉôÊ¬¤¬É½¼¨¤µ¤ì¤Þ¤¹)
   ^D         (adb¤ò½ªÎ»¤·¤Þ¤¹)

°Ê¾å
